<% if @infrastructure_id.to_i > 0 %>
    <%= form_for :cluster, method: "post", url: clusters_path, html: {role: "role", id: "cluster-form"} do |f| %>
        <%= f.hidden_field :infrastructure_id, :value => @infrastructure_id %>

        <br />
        <div class="form-control form-group input-group shadow">
        <%= f.label(:cluster_name, "Cluster Name") %>
        <span class="has-popover fa fa-question-circle-o fa-fw" data-toggle="popover" data-placement="bottom" title="Cluster name" data-content="The cluster name can be anything which helps you and the cluster's users. It will not be forwarded to OpenStack but is a label solely within the Dashboard."></span>
        <div class="form-group">
            <%= f.text_field(:name, placeholder: "Enter name", class: 'form-control') %>
        </div>
        </div>

        <div class="form-control form-group input-group shadow">
        <%= f.label(:master, "Master") %>
        <span class="has-popover fa fa-question-circle-o fa-fw" data-toggle="popover" data-placement="bottom" title="Master" data-content="The chosen image should always be Ubuntu Trusty 14.04; the processing power depends on the flavor. Keep in mind: on the master node, there is no slave node executed."></span>
        <div class="form-group input-group">
            <span class="input-group-addon">Image</span>
            <%= f.select(:master_image, options_for_select(@images.map { |image| [image[:name], image.id] }, :selected => @selectedimage), {}, {class: 'form-control'}) %>
        </div>
        <div class="form-group input-group">
            <span class="input-group-addon">Flavor</span>
            <%= f.select(:master_flavor, options_for_select(@flavors.map { |flavor| [flavor[:name]+" (#{flavor[:ram]}MB memory; #{flavor[:vcpus]} VCPUs; #{flavor[:disk]}GB disk space)", flavor.id] }), {}, {class: 'form-control'}) %>
        </div>
        </div>

        <div class="form-control form-group input-group shadow">
        <%= f.label(:slave, "Slave") %>
        <span class="has-popover fa fa-question-circle-o fa-fw" data-toggle="popover" data-placement="bottom" title="Slaves" data-content="The more slaves are deployed, the faster usually the computation finishes; the chosen image should always be Ubuntu Trusty 14.04; the processing power of an individual machine depends on the flavor. Don't forget: a higher amount of slaves and flavors with more resources cost more."></span>
        <div class="form-group input-group">
            <span class="input-group-addon"># slave nodes</span>
            <%= f.select(:slave_num, options_for_select((1..20).map { |i| [i, i] }), {}, {class: 'form-control'}) %>
            <span class="input-group-addon">Image</span>
            <%= f.select(:slave_image, options_for_select(@images.map { |image| [image[:name], image.id] }, :selected => @selectedimage), {}, {class: 'form-control'}) %>
        </div>
        <div class="form-group input-group">
            <span class="input-group-addon">Flavor</span>
            <%= f.select(:slave_flavor, options_for_select(@flavors.map { |flavor| [flavor[:name]+" (#{flavor[:ram]}MB memory; #{flavor[:vcpus]} VCPUs; #{flavor[:disk]}GB disk space)", flavor.id] }), {}, {class: 'form-control'}) %>
        </div>
        </div>

        <div class="form-control form-group input-group shadow">
        <%= f.label(:frameworks, "BIG Data frameworks") %>
        <span class="has-popover fa fa-question-circle-o fa-fw" data-toggle="popover" data-placement="bottom" title="Frameworks" data-content="Which frameworks should be automatically installed to the cluster?"></span>
        <div class="form-group">
            <% @frameworks.each do |framework| %>
                <% if !framework[:name].eql? 'HDFS' %>
                    <div class="checkbox">
                        <label><%= f.check_box(framework[:name]) %><%= framework[:name] %></label>
                        <span class="has-popover fa fa-question-circle-o fa-fw" data-toggle="popover" data-placement="top" title="<%= framework.name %>" data-content="<%= framework.description %>"></span>
                    </div>
                <% end %>
            <% end %>
        </div>
        </div>

        <div class="form-control form-group input-group shadow">
        <%= f.label(:password, "Infrastructure password") %>
        <span class="has-popover fa fa-question-circle-o fa-fw" data-toggle="popover" data-placement="top" title="Password" data-content="The OpenStack password for the username that the infrastructure has been registered with."></span>
        <div class="form-group">
            <div class="input-group">
              <%= f.password_field(:password, placeholder: "Password", class: 'form-control') %>
              <span class="input-group-btn">
                <%= f.submit "Create", class: "btn btn-success" %>
              </span>
            </div>
        </div>
        </div>


    <% end %>
<% end %>
